<!-- <div class="container d-flex justify-content-center wh-100 mt-5">
  <form [formGroup]="foodsForm" (ngSubmit)="saveFoods()">
    <div class="group-container">
      <div class="row justify-content-md-center">
        <mat-form-field class="col" appearance="outline">
          <mat-label for="mealTypes">Pick meal</mat-label>
          <mat-select formControlName="meal_type">
            <mat-option
              *ngFor="let meal of meal_types"
              [value]="meal"
              (click)="selectMeal(meal)"
            >
              {{ meal.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div
        class="row justify-content-md-center"
        *ngIf="hasMealType('Breakfast')"
      >
        <mat-form-field class="col" appearance="outline">
          <mat-label>Search foods for breakfast</mat-label>
          <div class="input-icon-container">
            <input
              matInput
              placeholder="Search foods for breakfast"
              type="text"
              name="test"
              formControlName="test"
            />

            <button
              mat-icon-button
              class="remove-icon"
              (click)="removeMeal('Breakfast')"
              aria-label="Remove meal type"
            >
              <fa-icon class="icon" [icon]="faXmark" size="2x"></fa-icon>
            </button>
          </div>
        </mat-form-field>
      </div>

      <div class="row justify-content-md-center" *ngIf="hasMealType('Brunch')">
        <mat-form-field class="col" appearance="outline">
          <mat-label for="food_name">Search foods for brunch</mat-label>
          <div class="input-icon-container">
            <input
              matInput
              placeholder="test"
              type="text"
              name="test"
              formControlName="test"
            />
            <button
              mat-icon-button
              class="remove-icon"
              (click)="removeMeal('Brunch')"
              aria-label="Remove meal type"
            >
              <fa-icon class="icon" [icon]="faXmark" size="2x"></fa-icon>
            </button>
          </div>
        </mat-form-field>
      </div>

      <div class="row justify-content-md-center" *ngIf="hasMealType('Lunch')">
        <mat-form-field class="col" appearance="outline">
          <mat-label>Search food for lunch</mat-label>
          <div class="input-icon-container">
            <input
              matInput
              placeholder="test"
              type="text"
              name="test"
              formControlName="test"
            />
            <button
              mat-icon-button
              class="remove-icon"
              (click)="removeMeal('Lunch')"
              aria-label="Remove meal type"
            >
              <fa-icon class="icon" [icon]="faXmark" size="2x"></fa-icon>
            </button>
          </div>
        </mat-form-field>
      </div>
    </div>

    <div class="group-container">
      <h3 class="header-3">Pick food</h3>
      <div class="row justify-content-md-center">
        <mat-form-field class="col" appearance="outline">
          <mat-label for="food_name">Search Food</mat-label>
          <input
            type="text"
            matInput
            formControlName="food_name"
            [matAutocomplete]="auto"
          />
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option
              *ngFor="let food of filteredFoods | async"
              [value]="food.name"
              (click)="pickFood(food.id)"
            >
              {{ food.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <button class="btn btn-primary w-100 mt-1">asd</button>
    </div>

    <div class="table-container">
      <h3 class="header-3">Picked foods / 100 grams</h3>
      <table class="table table-hover">
        <thead class="thead-light">
          <tr>
            <th class="text-center">Food Name</th>
            <th class="text-center">Energy(Kcal)</th>
            <th class="text-center">Carbs</th>
            <th class="text-center">Sugar</th>
            <th class="text-center">Fat</th>
            <th class="text-center">Fat(Saturated)</th>
            <th class="text-center">Protein</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of dietFoodList; let i = index">
            <td class="text-center">{{ data.name.fi }}</td>
            <td class="text-center">
              {{ data.energyKcal | number : "1.2-2" }}
            </td>
            <td class="text-center">
              {{ data.carbohydrate | number : "1.2-2" }}
            </td>
            <td class="text-center">{{ data.sugar | number : "1.2-2" }}</td>
            <td class="text-center">{{ data.fat | number : "1.2-2" }}</td>
            <td class="text-center">
              {{ data.saturatedFat | number : "1.2-2" }}
            </td>
            <td class="text-center">{{ data.protein | number : "1.2-2" }}</td>

          </tr>
        </tbody>
      </table>
    </div>
  </form>
</div> -->

<div class="container d-flex justify-content-center wh-100 mt-5">
  <form [formGroup]="foodsForm" (ngSubmit)="saveFoods()">
    <div class="group-container">
      <div class="row justify-content-md-center">
        <mat-form-field class="col" appearance="outline">
          <mat-label for="mealTypes">Pick meal</mat-label>
          <mat-select formControlName="meal_type">
            <mat-option
              *ngFor="let meal of meal_types"
              [value]="meal"
              (click)="selectMeal(meal)"
            >
              {{ meal.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <ng-container formArrayName="meal_selections">
        <div
          *ngFor="
            let meal of this.foodsForm.get('meal_selections').controls;
            let i = index
          "
          [formGroupName]="i"
        >
          <div class="row justify-content-md-center">
            <mat-form-field class="col" appearance="outline">
              <mat-label
                >Search foods for {{ meal.get("meal_name").value }}</mat-label
              >
              <div class="input-icon-container">
                <input
                  matInput
                  placeholder="Search foods"
                  type="text"
                  formControlName="food_search"
                  (keyup)="onFoodSearch($event, i)"
                />
                <button
                  mat-icon-button
                  class="remove-icon"
                  (click)="removeMeal(meal.get('meal_name').value)"
                  aria-label="Remove meal type"
                >
                  <fa-icon [icon]="faXmark" size="2x"></fa-icon>
                </button>
              </div>
            </mat-form-field>
          </div>
        </div>
      </ng-container>
    </div>

    <div class="group-container">
      <h3 class="header-3">Pick food</h3>
      <div class="row justify-content-md-center">
        <mat-form-field class="col" appearance="outline">
          <mat-label for="food_name">Search Food</mat-label>
          <input
            type="text"
            matInput
            formControlName="food_name"
            [matAutocomplete]="auto"
          />
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option
              *ngFor="let food of filteredFoods | async"
              [value]="food.name"
              (click)="pickFood(food.id)"
            >
              {{ food.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <button class="btn btn-primary w-100 mt-1">Submit</button>
    </div>

    <div class="table-container">
      <h3 class="header-3">Picked foods / 100 grams</h3>
      <table class="table table-hover">
        <thead class="thead-light">
          <tr>
            <th class="text-center">Food Name</th>
            <th class="text-center">Energy(Kcal)</th>
            <th class="text-center">Carbs</th>
            <th class="text-center">Sugar</th>
            <th class="text-center">Fat</th>
            <th class="text-center">Fat(Saturated)</th>
            <th class="text-center">Protein</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of dietFoodList; let i = index">
            <td class="text-center">{{ data.name.fi }}</td>
            <td class="text-center">
              {{ data.energyKcal | number : "1.2-2" }}
            </td>
            <td class="text-center">
              {{ data.carbohydrate | number : "1.2-2" }}
            </td>
            <td class="text-center">{{ data.sugar | number : "1.2-2" }}</td>
            <td class="text-center">{{ data.fat | number : "1.2-2" }}</td>
            <td class="text-center">
              {{ data.saturatedFat | number : "1.2-2" }}
            </td>
            <td class="text-center">{{ data.protein | number : "1.2-2" }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </form>
</div>
